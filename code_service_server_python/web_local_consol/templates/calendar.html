<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ESP Calendar Management</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Manage Calendar Identifiers</h1>
    {% if message %}
        <div class="message-success">{{ message }}</div>
    {% endif %}
    
    <form method="POST" id="calendar-form">
        <div id="calendar-list">
            {% for esp_id, info in devices.items() %}
            <div class="esp-block">
                <span class="esp-id"><strong>{{ esp_id }}</strong></span>
                <span class="separator">|</span>

                <label>Calendar ID:</label>
                <input type="text" name="calendar_{{ esp_id }}" 
                       value="{{ info.get('calendar_id', '') }}" 
                       placeholder="Enter Google Calendar ID">
            </div>
            {% endfor %}
        </div>
        <div style="text-align: center; margin-top: 30px;">
            <button type="submit">Save Changes</button>
        </div>
    </form>
    
    <a href="/" class="back-link">← Back to Home</a>
</body>
</html>
